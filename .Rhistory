dplyr::select(CASE_PARTICIPANT_ID,
race2,
PRIMARY_CHARGE,
disposed,
disp,
gbp,
CHARGE_DISPOSITION,
CHARGE_DISPOSITION_REASON,
JUDGE,
OFFENSE_TITLE,
CLASS,
class_order)
d3 <- d2 %>%
group_by(CASE_PARTICIPANT_ID) %>%
arrange(class_order) %>%
filter(row_number()==1)
gbp <- d2 %>%
filter(gbp == 1) %>%
select(-race2) %>%
rename(gbp_disp = disp)
gbp2 <- gbp %>%
group_by(CASE_PARTICIPANT_ID) %>%
arrange(class_order) %>%
filter(row_number()==1)
# d3 %>%
#   group_by(CASE_PARTICIPANT_ID) %>%
#   tally(sort = T) %>%
#   head(10)
# d2 %>%
#   filter(CASE_PARTICIPANT_ID == 1033282518663) %>%
#   distinct() #%>%   View()
df <- int2 %>%
left_join(i2, by = "CASE_PARTICIPANT_ID") %>%
left_join(d3, by = "CASE_PARTICIPANT_ID") %>%
left_join(gbp2, by = "CASE_PARTICIPANT_ID")
df2 <- df %>%
#head() %>%
to_dummy(EVENT, disp, race2, suffix = "label") %>%
bind_cols(df) %>%
replace_na(`EVENT_Indictment`:CASE_PARTICIPANT_ID, disposed.x, gbp.x,
value = 0)
glimpse(df2)
#   mutate(CasesCommenced = ifelse(is.na(DefendantID)==F,1,0),
#          CasesDeclined = ifelse(IsDP==1,1,0),
#          CasesCharged = ifelse(IsDP==0,1,0),
#          CasesArraignSupreme = ifelse(is.na(ARCSurvive) & Indicted==1,1,0),
#          CasesArraigned = ifelse(IsDP==0 & is.na(ARCSurvive)==F,1,0),
#          CasesDisposedArraignment = ifelse(ARCSurvive==0,1,0),
#          CasesSurvivingArraignment = ifelse(ARCSurvive==1,1,0),
#          CasesIndicted = ifelse(Indicted==1,1,0),
#          CasesDisposed = ifelse(is.na(DspCondensed)==F,1,0),
#          CasesSentenced = ifelse(DspCondensed %in% c("Plea","Convicted"),1,0),
#          CasesDismissed = ifelse(DspCondensed %in% c("Evidence Dismissal","30.30 Speedy",
#                                                      "Other Non ACD/M Dismissal","ACD/M Dismissal"),1,0),
#          CasesDismissedACD = ifelse(DspCondensed %in% c("ACD/M Dismissal"),1,0),
#          CasesDismissedNONACD = ifelse(DspCondensed %in% c("Evidence Dismissal","30.30 Speedy",
#                                                            "Other Non ACD/M Dismissal"),1,0),
#          CasesBWO = ifelse(CaseStatus=="Outstanding Bench Warrant", 1,0))
table(duplicated(df2$CASE_PARTICIPANT_ID))
library(feather)
outfile <- here::here("data", "dataset.feather")
write_feather(df2, outfile)
qplot(df2$event_year)
toc()
##Cleanup
glimpse(int)
int2 <- int %>%
mutate(ARREST_DATE = mdy_hms(ARREST_DATE),
arrest_year = as.character(year(ARREST_DATE))) %>%
#filter(EVENT_DATE <= today(),event_year >= 2012) %>%
dplyr::select(CASE_PARTICIPANT_ID,
Offense_Category,
PARTICIPANT_STATUS,
ARREST_DATE,
arrest_year,
Offense_Category,
AGE_AT_INCIDENT,
GENDER,
RACE,
LAW_ENFORCEMENT_AGENCY
)
##Cleanup
glimpse(int2)
qplot(int2$arrest_year)
##Cleanup
int2 <- int %>%
mutate(ARREST_DATE = mdy_hms(ARREST_DATE),
arrest_year = as.character(year(ARREST_DATE))) %>%
filter(ARREST_DATE <= today(),arrest_year >= 2012) %>%
dplyr::select(CASE_PARTICIPANT_ID,
Offense_Category,
PARTICIPANT_STATUS,
ARREST_DATE,
arrest_year,
Offense_Category,
AGE_AT_INCIDENT,
GENDER,
RACE,
LAW_ENFORCEMENT_AGENCY
)
qplot(int2$arrest_year)
pkgs <- c("tidyverse", "here", "DescTools", "skimr",
"lubridate", "sjmisc", "tictoc")
options(scipen=1000)
#Report: https://www.cookcountystatesattorney.org/sites/default/files/files/documents/ccsao_2017_data_report_180220.pdf
lapply(pkgs, require, character.only = T)
tic()
##Intake - all people arrested
int <- here::here('data','intake.csv')
int <- read.csv(int)
##Initiation - all people charged
init <- here::here('data','initiation.csv')
i <- read.csv(init)
##Dispositions
disp <- here::here('data','dispositions.csv')
d <- read.csv(disp)
##Cleanup
int2 <- int %>%
mutate(ARREST_DATE = mdy_hms(ARREST_DATE),
arrest_year = as.character(year(ARREST_DATE))) %>%
filter(ARREST_DATE <= today(),arrest_year >= 2012) %>%
dplyr::select(CASE_PARTICIPANT_ID,
Offense_Category,
PARTICIPANT_STATUS,
ARREST_DATE,
arrest_year,
Offense_Category,
AGE_AT_INCIDENT,
GENDER,
RACE,
LAW_ENFORCEMENT_AGENCY
)
i2 <- i %>%
dplyr::filter(PRIMARY_CHARGE == 'true') %>%
mutate(EVENT_DATE = mdy_hms(EVENT_DATE),
event_year = as.character(year(EVENT_DATE))) %>%
filter(EVENT_DATE <= today(),event_year >= 2012) %>%
dplyr::select(CASE_PARTICIPANT_ID,
OFFENSE_TITLE,
EVENT,
EVENT_DATE,
event_year
)
d2 <- d %>%
mutate(class_order = case_when(CLASS == 'X' ~ 1,
CLASS == '1' ~ 2,
CLASS == '2' ~ 3,
CLASS == '3' ~ 4,
CLASS == '4' ~ 5,
TRUE ~ 9),
disp = forcats::fct_lump(CHARGE_DISPOSITION, prop = .005),
disposed = 1,
gbp = case_when(disp %in% c("Plea Of Guilty", "Finding Guilty", "Verdict Guilty") ~ 1,
TRUE ~ 0),
race2 = case_when(RACE %in% c('Asian', "ASIAN") ~ "Asian",
RACE %in% c("Black") ~ "Black",
RACE %in% c("White", "CAUCASIAN") ~ "White",
RACE %in% c("HISPANIC", "White [Hispanic or Latino]", "White/Black [Hispanic or Latino]") ~ "Latino",
TRUE ~ "Other")
) %>%
dplyr::select(CASE_PARTICIPANT_ID,
race2,
PRIMARY_CHARGE,
disposed,
disp,
gbp,
CHARGE_DISPOSITION,
CHARGE_DISPOSITION_REASON,
JUDGE,
OFFENSE_TITLE,
CLASS,
class_order)
d3 <- d2 %>%
group_by(CASE_PARTICIPANT_ID) %>%
arrange(class_order) %>%
filter(row_number()==1)
gbp <- d2 %>%
filter(gbp == 1) %>%
select(-race2) %>%
rename(gbp_disp = disp)
gbp2 <- gbp %>%
group_by(CASE_PARTICIPANT_ID) %>%
arrange(class_order) %>%
filter(row_number()==1)
# d3 %>%
#   group_by(CASE_PARTICIPANT_ID) %>%
#   tally(sort = T) %>%
#   head(10)
# d2 %>%
#   filter(CASE_PARTICIPANT_ID == 1033282518663) %>%
#   distinct() #%>%   View()
df <- int2 %>%
left_join(i2, by = "CASE_PARTICIPANT_ID") %>%
left_join(d3, by = "CASE_PARTICIPANT_ID") %>%
left_join(gbp2, by = "CASE_PARTICIPANT_ID")
df2 <- df %>%
#head() %>%
to_dummy(EVENT, disp, race2, suffix = "label") %>%
bind_cols(df) %>%
replace_na(`EVENT_Indictment`:CASE_PARTICIPANT_ID, disposed.x, gbp.x,
value = 0)
glimpse(df2)
#   mutate(CasesCommenced = ifelse(is.na(DefendantID)==F,1,0),
#          CasesDeclined = ifelse(IsDP==1,1,0),
#          CasesCharged = ifelse(IsDP==0,1,0),
#          CasesArraignSupreme = ifelse(is.na(ARCSurvive) & Indicted==1,1,0),
#          CasesArraigned = ifelse(IsDP==0 & is.na(ARCSurvive)==F,1,0),
#          CasesDisposedArraignment = ifelse(ARCSurvive==0,1,0),
#          CasesSurvivingArraignment = ifelse(ARCSurvive==1,1,0),
#          CasesIndicted = ifelse(Indicted==1,1,0),
#          CasesDisposed = ifelse(is.na(DspCondensed)==F,1,0),
#          CasesSentenced = ifelse(DspCondensed %in% c("Plea","Convicted"),1,0),
#          CasesDismissed = ifelse(DspCondensed %in% c("Evidence Dismissal","30.30 Speedy",
#                                                      "Other Non ACD/M Dismissal","ACD/M Dismissal"),1,0),
#          CasesDismissedACD = ifelse(DspCondensed %in% c("ACD/M Dismissal"),1,0),
#          CasesDismissedNONACD = ifelse(DspCondensed %in% c("Evidence Dismissal","30.30 Speedy",
#                                                            "Other Non ACD/M Dismissal"),1,0),
#          CasesBWO = ifelse(CaseStatus=="Outstanding Bench Warrant", 1,0))
table(duplicated(df2$CASE_PARTICIPANT_ID))
library(feather)
outfile <- here::here("data", "dataset.feather")
write_feather(df2, outfile)
qplot(df2$event_year)
toc()
set.seed(813)
file.exists(Sys.which('texi2dvi'))
# library(hrbrthemes);library(RODBC);library(tidyverse);library(lubridate)
# library(sqldf);library(DescTools);library(purrr);library(ggplot2)
# library(stringr);library(forcats);library(xtable);library(ggalt)
# library(knitr);library(kableExtra);library(janitor);library(scales);
# library(Cairo)
#Set to current working directory here
#setwd("P:/Bureau Data/PLANNING/Data Requests/Example File Path")
options(scipen = 1000,stringsAsFactors = FALSE)
********
#================
#Import and Clean
#================
infile <- here::here("data", "dataset.feather")
d <- read_feather(infile)
glimpse(d)
Desc(d$EVENT)
glimpse(d)
Desc(d$EVENT~d$disp)
d %>%
group_by(EVENT,disp) %>%
tally(sort=T)
Desc(d$EVENT)
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
)
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
)
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
as.data.frame() %>%
as_tibble()
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
as.data.frame() %>%
as_tibble() %>%
rownames_to_column(var = " ")
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
as.data.frame() %>%
as_tibble() %>%
rownames_to_column(var = " ") %>%
set_names(.[1,-1] %>% unlist() %>% as.numeric() %>% as.character() %>% c(" ",.))
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
as.data.frame() %>%
as_tibble()
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t()
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
#as.data.frame() %>%
#as_tibble() %>%
rownames_to_column(var = " ")
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
as.data.frame() %>%
#as_tibble() %>%
rownames_to_column(var = " ")
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
as.data.frame() %>%
#as_tibble() %>%
rownames_to_column(var = " ") %>%
set_names(.[1,-1] %>% unlist() %>% as.numeric() %>% as.character() %>% c(" ",.))
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
as.data.frame() %>%
#as_tibble() %>%
rownames_to_column(var = " ") %>%
set_names(.[1,-1] %>% unlist() %>% as.numeric() %>% as.character() %>% c(" ",.)) %>%
filter(` `!="arrest_year")
d %>%
group_by(arrest_year) %>%
summarise(`Commenced` = n_distinct(CASE_PARTICIPANT_ID),
`via Preliminary Hearing`=sum(`EVENT_Preliminary Hearing`),
`via Indictment` = sum(EVENT_Indictment)
# `Nolle Pros.` = sum(ifelse(),na.rm = T),
# `Charged` = sum(CasesCharged,na.rm = T),
# `Not Arraigned - SCA or SCI` = sum(CasesArraignSupreme,na.rm = T),
# `Arraigned` = sum(CasesArraigned,na.rm = T),
# `Disposed at Arr.` = sum(CasesDisposedArraignment,na.rm = T),
# `Survived Arr.` = sum(CasesSurvivingArraignment,na.rm = T),
# `Indicted` = sum(CasesIndicted,na.rm = T),
# `Pled Guilty or Convicted` = sum(CasesSentenced,na.rm = T),
# `Dismissed` = sum(CasesDismissed,na.rm = T),
# `ACD` = sum(CasesDismissedACD,na.rm = T),
# `Non-ACD` = sum(CasesDismissedNONACD,na.rm = T),
# `Outstanding Bench Warrant` = sum(CasesBWO, na.rm = T)
) %>%
t() %>%
as.data.frame() %>%
#as_tibble() %>%
rownames_to_column(var = " ") %>%
set_names(.[1,-1] %>% unlist() %>% as.numeric() %>% as.character() %>% c(" ",.)) %>%
filter(` `!="arrest_year") %>%
mutate_at(vars(-1),as.numeric) %>%
mutate(Total = rowSums(.[,2:ncol(.)]))
